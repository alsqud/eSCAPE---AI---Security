<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>eSCAPE - AI ë³´ì•ˆ í”Œë«í¼</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    :root{
      --bg: #f4f6f8; --kosis-mint: #26a69a; --kosis-grad-start: #26a69a; --kosis-grad-end: #00897b;
      --panel: #ffffff; --line: #e2e8f0; --text: #1e293b; --muted: #64748b; --accent: #26a69a; --radius: 16px;
      --user-msg: #26a69a; --ai-msg: #f1f5f9;
    }
    *{box-sizing:border-box}
    body{ margin:0; font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; background: var(--bg); color:var(--text); min-height:100dvh; display:flex; flex-direction:column; }
    a{color:inherit}
    
    /* [1] í—¤ë”(ë©”ë‰´ë°”): ìƒë‹¨ ê³ ì • & ë°°ê²½ìƒ‰ ì ìš© */
    header {
        background: linear-gradient(90deg, var(--kosis-grad-start), var(--kosis-grad-end)) !important;
        box-shadow: 0 1px 10px rgba(0,0,0,0.1) !important;
        position: fixed; /* ìƒë‹¨ ê³ ì • */
        top: 0;
        left: 0;
        width: 100%;
        height: 75px; 
        z-index: 1000;
        display: flex; 
        align-items: center; 
        border-bottom: 1px solid rgba(255,255,255,0.15); 
    }
    
    .wrap{width: 94%; max-width: 1500px; margin:0 auto; padding:20px;}
    .topbar{ display:flex; align-items:center; justify-content:space-between; width: 100%; }
    
    .nav-text, .brand, .auth-link { text-shadow: 0 1px 3px rgba(0,0,0,0.4); }
    .brand{ display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.3px; color: white; cursor: pointer; min-width: 280px; }
    .nav-center { flex: 1; display: flex; justify-content: center; gap: 45px; }
    .nav-text { background: transparent; border: none; color: rgba(255,255,255,0.9); font-size: 19px; font-weight: 700; cursor: pointer; padding: 12px 15px; position: relative; transition: all 0.2s; font-family: inherit; }
    .nav-text:hover, .nav-text.active { color: #ffffff; text-shadow: 0 0 12px rgba(255,255,255,0.5); }
    .nav-text.active::after { content: ''; position: absolute; bottom: 0; left: 15px; right: 15px; height: 4px; background: white; border-radius: 2px; }
    .nav-right { display: flex; align-items: center; justify-content: flex-end; gap: 15px; min-width: 280px; font-size: 14px; color: white; font-weight: 500; }
    .auth-link { cursor: pointer; background: none; border: none; color: white; font-size: 14px; padding: 0; font-family: inherit; }
    .auth-link:hover { text-decoration: underline; }
    .nav-divider { opacity: 0.5; font-size: 12px; }

    /* [2] ë©”ì¸ ì»¨í…ì¸  ì˜ì—­: í—¤ë” ë†’ì´ë§Œí¼ ì•„ë˜ë¡œ ë°€ì–´ì¤Œ */
    main {
        flex: 1;
        padding-bottom: 50px;
        padding-top: 95px !important; /* í—¤ë”(75px) + ì—¬ë°±(20px) = 95px */
    }

    /* [3] ë©”ì¸ í™”ë©´ìš© í™•ì¥ í—¤ë” (í†µê³„ì²­ ìŠ¤íƒ€ì¼) */
    .hero-extended {
        background: linear-gradient(135deg, #26a69a 0%, #00695c 100%) !important;
        color: white !important;
        width: 100vw;
        position: relative;
        left: 50%;
        right: 50%;
        margin-left: -50vw;
        margin-right: -50vw;
        /* í—¤ë” ë†’ì´ë§Œí¼ ë‹¤ì‹œ ìœ„ë¡œ ì˜¬ë ¤ì„œ ë°°ê²½ ì´ì–´ì§€ê²Œ í•¨ */
        margin-top: -95px; 
        padding-top: 130px; 
        padding-bottom: 50px;
        border-radius: 0 0 50px 50px;
        display: flex;
        flex-direction: column;
        align-items: center; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        margin-bottom: 40px;
    }

    .hero-header { width: 90%; max-width: 1400px; text-align: left; margin-bottom: 30px; }
    .hero-header h1 { font-size: 34px; font-weight: 800; margin: 0; }
    .hero-header p { font-size: 16px; opacity: 0.9; margin-top: 8px; }

    .hero-stats-grid {
        width: 90%;
        max-width: 1400px;
        display: grid;
        grid-template-columns: repeat(3, 1fr); 
        gap: 20px 0;
    }

    .stat-item {
        background: transparent;
        border: none;
        padding: 10px 30px;
        text-align: left;
        border-left: 1px solid rgba(255,255,255,0.3); 
    }
    .hero-stats-grid .stat-item:nth-child(3n+1) { border-left: none; }

    .stat-label { font-size: 14px; font-weight: 500; opacity: 0.8; margin-bottom: 6px; display: block; color: #e0f2f1; }
    .stat-value { font-size: 24px; font-weight: 700; display: block; letter-spacing: -0.5px;}
    .stat-value.danger { color: #ffccbc; }
    .stat-value.safe { color: #b9f6ca; }

    /* [4] í†µê³„ì²­ ìŠ¤íƒ€ì¼ ì•„ì´ì½˜ ê·¸ë¦¬ë“œ */
    .kosis-icon-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
        gap: 15px;
        margin-bottom: 30px;
        padding: 0 10px;
    }
    .kosis-btn {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        padding: 20px 10px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.02);
    }
    .kosis-btn:hover, .kosis-btn.active {
        border-color: #26a69a;
        background: #f0fdfa;
        color: #00695c;
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(38, 166, 154, 0.2);
    }
    .kosis-btn-icon { font-size: 28px; display: block; margin-bottom: 5px; }
    .kosis-btn-text { font-size: 14px; font-weight: 700; word-break: keep-all; }

    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ë“¤ */
    .grid{ display:grid; grid-template-columns: 1.1fr .9fr; gap:24px; margin-top:24px; }
    @media (max-width: 920px){ .grid{grid-template-columns:1fr; } }
    .card{ background: var(--panel); border: 1px solid var(--line); border-radius: var(--radius); box-shadow: 0 4px 20px rgba(0,0,0,0.03); padding: 30px; margin-bottom: 24px; min-height: 450px; display: flex; flex-direction: column; }
    .btn{ border:1px solid var(--line); background: #f1f5f9; color: var(--text); padding:12px 18px; border-radius: 10px; cursor:pointer; transition:.2s ease; font-weight:600; font-size:15px; }
    .btn:hover{transform: translateY(-2px); background: #e2e8f0;}
    .btn.primary{ border-color: transparent; background: var(--kosis-mint); color: white; box-shadow: 0 4px 10px rgba(38, 166, 154, 0.3); }
    .sectionTitle{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding-bottom:14px; border-bottom:2.5px solid #f1f5f9; margin-bottom:20px; }
    .sectionTitle h2{margin:0; font-size:20px; font-weight: 700; color: #334155;}
    .badge{ font-size:12px; padding:4px 8px; border-radius:6px; background: #f1f5f9; color: var(--muted); font-weight: 600; }
    .row{display:grid; grid-template-columns:1fr 1fr; gap:16px;}
    label{ display:block; font-size:14px; color: var(--muted); margin-bottom:10px; font-weight: 600; }
    input, select, textarea{ width:100%; padding:14px 16px; border-radius:12px; border:1px solid var(--line); background: #f8fafc; color: var(--text); outline:none; transition: border-color 0.2s; font-family: inherit; }
    textarea{min-height:350px; resize:vertical; font-size: 16px;}
    input:focus, select:focus, textarea:focus{ border-color: var(--kosis-mint); background: white; box-shadow: 0 0 0 3px rgba(38, 166, 154, 0.1); }
    .inline{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    .result-box { background: #f8fafc; border: 1px solid var(--line); border-radius: 14px; padding: 18px; margin-bottom: 18px; }
    .result-label { font-size: 13px; font-weight: 800; color: var(--kosis-mint); margin-bottom: 8px; display: block; letter-spacing: 0.5px; }
    .result-content { font-size: 16px; color: var(--text); line-height: 1.6; }
    .status-tag { display: inline-block; padding: 5px 10px; border-radius: 7px; font-size: 14px; font-weight: 800; color: white; margin-right: 5px; }
    .tag-danger { background: #e11d48; } .tag-safe { background: #059669; } .tag-step { background: #26a69a; }
    .divider{height:1px; background: var(--line); margin:20px 0;}
    footer{ margin-top: auto; border-top:1px solid var(--line); background: white; padding: 20px 0; }
    .small{font-size:13px; color: var(--muted); text-align: center;}
    
    /* ì•„ì¹´ì´ë¸Œ ìŠ¬ë¼ì´ë” & í•„í„° */
    .year-slider { display: flex; align-items: center; justify-content: space-between; margin: 0 0 30px 0; padding: 20px; background: #f0fdfa; border-radius: 16px; border: 1px solid #ccfbf1; }
    .year-label { font-weight: 800; color: #0f766e; font-size: 16px; min-width: 40px; text-align: center; }
    input[type=range] { height: 6px; background: #cbd5e1; border-radius: 5px; outline: none; -webkit-appearance: none; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; background: #26a69a; border-radius: 50%; cursor: pointer; box-shadow: 0 0 0 4px rgba(38, 166, 154, 0.2); }
    
    .filterBar{ display:flex; flex-wrap:wrap; gap:10px; padding: 12px 0; border-bottom:1px solid var(--line); margin-bottom: 25px; justify-content: center; }
    .tag{ border:1px solid transparent; background: #f1f5f9; padding:10px 16px; border-radius: 9px; font-size: 14px; font-weight: 700; cursor:pointer; color: var(--muted); transition:.2s; }
    .tag.active{ background: var(--kosis-mint); color: white; box-shadow: 0 3px 8px rgba(38, 166, 154, 0.35); }
    .flowBox{ position:relative; min-height: 400px; background: #f8fafc; border-radius: 16px; padding: 30px; border: 1px solid #e2e8f0; }
    .flowTitle{ text-align:center; color: var(--text); font-weight: 800; font-size: 20px; margin-bottom: 30px; display: block;}
    .flow-container { display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap; width: 100%; margin-bottom: 30px; }
    .step-card { background: white; border: 1px solid var(--line); border-radius: 12px; padding: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); min-width: 120px; position: relative; cursor: pointer; animation: slideUp 0.5s forwards; opacity: 0; transform: translateY(20px); transition: transform 0.2s, border-color 0.2s; }
    .step-card:hover { transform: translateY(-5px); border-color: var(--kosis-mint); }
    .step-icon { font-size: 32px; margin-bottom: 10px; display: block; }
    .step-title { font-weight: 700; font-size: 15px; word-break: keep-all; }
    .step-arrow { color: var(--kosis-mint); font-size: 24px; font-weight: 800; animation: fadeIn 0.5s ease-out forwards; opacity: 0; animation-delay: 0.3s; }
    .flow-desc { text-align: center; padding: 15px; background: #e0f2f1; border-radius: 12px; color: #00695c; font-weight: 600; animation: fadeIn 0.8s ease-out; }
    .step-detail-container { padding: 20px; text-align: center; animation: fadeIn 0.4s ease-out; }
    .detail-text { font-size: 18px; line-height: 1.8; color: var(--text); max-width: 800px; margin: 0 auto 35px auto; word-break: keep-all; font-weight: 500; }
    .back-btn { padding: 10px 20px; background: white; border: 1px solid var(--line); border-radius: 999px; cursor: pointer; font-weight: 600; color: var(--muted); transition: all 0.2s; display: inline-flex; align-items: center; gap: 6px; }

    /* ì±„íŒ… ë° ê¸°íƒ€ */
    .loader {border: 3px solid #f3f3f3; border-radius: 50%; border-top: 3px solid var(--kosis-mint); width: 24px; height: 24px; animation: spin 1s linear infinite; display: inline-block; vertical-align: middle;}
    @keyframes spin {0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); }}
    .chat-container { height: 400px; overflow-y: auto; background: #eef2f6; border-radius: 12px; padding: 20px; border: none; display: flex; flex-direction: column; gap: 12px; margin-top:10px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); }
    .chat-bubble { max-width: 75%; padding: 12px 16px; border-radius: 16px; font-size: 14px; line-height: 1.5; word-break: break-word; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .chat-bubble.ai { background: white; color: var(--text); align-self: flex-start; border-top-left-radius: 2px; }
    .chat-bubble.user { background: var(--kosis-mint); align-self: flex-end; border-top-right-radius: 2px; color: #fff; }
    .input-group { display: flex; gap: 10px; margin-top: 14px; }
    #simScenario { color: #1e293b; font-weight: 700; font-size: 15px; border-radius: 10px; padding: 8px; border:1px solid #cbd5e1; }
    #btnSend { white-space: nowrap; min-width: 80px; }
    .auth-container { max-width: 480px; margin: 40px auto; background: white; padding: 40px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 1px solid var(--line); text-align: center; }
    .auth-title { font-size: 24px; font-weight: 800; color: var(--text); margin-bottom: 30px; }
    .auth-input { margin-bottom: 15px; text-align: left; }
    .auth-input input { width: 100%; height: 48px; padding: 0 15px; border-radius: 8px; border: 1px solid var(--line); font-size: 15px; background: #f8fafc; }
    .auth-btn { width: 100%; height: 50px; background: var(--kosis-mint); color: white; font-size: 16px; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; transition: 0.2s; }
    .file-upload-box { margin-top: 15px; border: 2px dashed #cbd5e1; border-radius: 10px; padding: 20px; text-align: center; background: #f8fafc; cursor: pointer; transition: 0.2s; }
    
    .view{display:none; animation: fadeIn 0.4s ease-out;}
    .view.active{display:block;}
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <div class="topbar">
      <div class="brand" onclick="showView('home')">
        <div>
          <div style="font-size:22px;">eSCAPE</div>
          <div style="font-size:13px; opacity:0.9; margin-top:3px;">ìŠ¤ìº  ì§€í˜• ì•„ì¹´ì´ë¸Œ Â· AI í”„ë¡œíŒŒì¼ë§</div>
        </div>
      </div>
      <nav class="nav-center">
        <button class="nav-text" data-nav="archive" onclick="showView('archive')">ìŠ¤ìº  ì§€í˜• ì•„ì¹´ì´ë¸Œ</button>
        <button class="nav-text" data-nav="ai" onclick="showView('ai')">AI í”„ë¡œíŒŒì¼ë§</button>
        <button class="nav-text" data-nav="simulate" onclick="showView('simulate')">í”¼ì‹± ëª¨ì˜ì²´í—˜</button> 
      </nav>
      <div class="nav-right" id="navAuthArea">
        <button class="auth-link" onclick="showAuth('login')">ë¡œê·¸ì¸</button>
        <span class="nav-divider">|</span>
        <button class="auth-link" onclick="showAuth('signup')">íšŒì›ê°€ì…</button>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <section id="home" class="view active">
    
    <div class="hero-extended">
      <div class="hero-header">
        <h1>ì˜¤ëŠ˜ì˜ ìŠ¤ìº  ì§€í˜• (Live)</h1>
        <p>ì‹¤ì‹œê°„ ìˆ˜ì§‘ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ AI ë³´ì•ˆ í˜„í™©íŒ</p>
      </div>
      <div class="hero-stats-grid">
        <div class="stat-item">
          <span class="stat-label">ğŸš¨ í˜„ì¬ ê²½ë³´ ë‹¨ê³„</span>
          <span class="stat-value danger">ì‹¬ê° (Red)</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">ğŸ”¥ ì‹¤ì‹œê°„ ê¸‰ìƒìŠ¹ í‚¤ì›Œë“œ</span>
          <span class="stat-value">ë¶€ê³ ì¥, ì²­ì²©ì¥</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">ğŸ’¬ ìµœë‹¤ ì‹ ê³  ì ‘ìˆ˜</span>
          <span class="stat-value">ë©”ì‹ ì € í”¼ì‹±</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">ğŸ›¡ï¸ AI íƒì§€ ì‹œìŠ¤í…œ</span>
          <span class="stat-value safe">ì •ìƒ ê°€ë™ ì¤‘</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">âš ï¸ ì£¼ìš” ê³µê²© íƒ€ê²Ÿ</span>
          <span class="stat-value">ê³ ë ¹ì¸µ, ì‚¬íšŒì´ˆë…„ìƒ</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">ğŸ“‰ í”¼í•´ ì˜ˆë°© ì¶”ì„¸</span>
          <span class="stat-value">ì „ì£¼ ëŒ€ë¹„ ê°ì†Œ</span>
        </div>
      </div>
    </div>

    <div style="margin-top: 40px; max-width: 1400px; margin-left: auto; margin-right: auto;">
        
        <h3 style="text-align:center; color:#475569; margin-bottom:20px; font-weight:700;">
            ì•Œê³  ì‹¶ì€ ë²”ì£„ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”
        </h3>

        <div class="kosis-icon-grid">
            <div class="kosis-btn active" onclick="renderFlow('romance'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ’˜</span><span class="kosis-btn-text">ë¡œë§¨ìŠ¤ìŠ¤ìº </span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('voice'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ“</span><span class="kosis-btn-text">ë³´ì´ìŠ¤í”¼ì‹±</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('messenger'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ“±</span><span class="kosis-btn-text">ë©”ì‹ ì €í”¼ì‹±</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('bodycam'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ“¹</span><span class="kosis-btn-text">ëª¸ìº í”¼ì‹±</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('site'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ’»</span><span class="kosis-btn-text">í”¼ì‹±ì‚¬ì´íŠ¸</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('deepfake'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ¤–</span><span class="kosis-btn-text">ë”¥í˜ì´í¬</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('loan'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ’°</span><span class="kosis-btn-text">ëŒ€ì¶œë¹™ì</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('invest'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ“ˆ</span><span class="kosis-btn-text">íˆ¬ìë¦¬ë”©ë°©</span>
            </div>
            <div class="kosis-btn" onclick="renderFlow('smishing'); highlightBtn(this)">
                <span class="kosis-btn-icon">ğŸ“©</span><span class="kosis-btn-text">ìŠ¤ë¯¸ì‹±</span>
            </div>
        </div>

        <div class="card flowBox" style="min-height: 400px;">
          <div id="flowTitleText" style="text-align:center; font-weight:800; font-size:22px; margin-bottom:30px; color:#1e293b;">
            ë¡œë§¨ìŠ¤ìŠ¤ìº  ì „ê°œ íë¦„
          </div>
          <div id="flowRenderArea"></div>
        </div>
    </div>
  </section>

  <section id="archive" class="view">
    <div class="card">
        <div class="sectionTitle">
            <h2>ğŸ“‚ ìŠ¤ìº  ì§€í˜• ì•„ì¹´ì´ë¸Œ</h2>
            <span class="badge">History & Flows</span>
        </div>

        <div class="year-slider" style="gap: 15px; align-items: center; margin-bottom: 20px;">
            <span class="year-label">1990</span>
            <input type="range" id="archiveYearInput" min="1990" max="2026" value="2026" 
                   style="flex:1; cursor: pointer; accent-color: #26a69a;" 
                   oninput="handleYearChange(this.value)">
            <span class="year-label"><span id="displayYear">2026</span> (ì„ íƒ)</span>
        </div>

        <div id="yearInfoBox" style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 25px; margin-bottom: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.03);">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                <span id="yearEraBadge" style="background: #26a69a; color: white; padding: 5px 12px; border-radius: 20px; font-weight: 800; font-size: 14px;">2020ë…„ëŒ€</span>
                <h4 id="yearSummaryTitle" style="margin: 0; color: #00695c; font-size: 19px; font-weight: 800;">ì´ˆê°œì¸í™” ì¸ê³µì§€ëŠ¥ ë²”ì£„</h4>
            </div>
            
            <div style="margin-bottom: 12px;">
                <div id="yearKeywords" style="display: flex; gap: 8px; flex-wrap: wrap;">
                    </div>
            </div>

            <p id="yearDescription" style="color: #334155; font-size: 15px; line-height: 1.6; margin-bottom: 18px; word-break: keep-all; font-weight: 500;">
                AI ê¸°ìˆ ì„ ì•…ìš©í•œ ë”¥í˜ì´í¬, ìŠ¤ë¯¸ì‹± ë“± ê³ ë„í™”ëœ ê¸°ìˆ  ë²”ì£„ê°€ ì£¼ë¥¼ ì´ë£¹ë‹ˆë‹¤.
            </p>

            <div style="background: white; border-left: 4px solid #26a69a; padding: 15px; border-radius: 4px; border: 1px solid #e2e8f0;">
                <label style="font-size: 12px; color: #64748b; font-weight: 800; display: block; margin-bottom: 6px;">ğŸ“„ ì‹¤ì œ ì‚¬ë¡€</label>
                <div id="yearCaseExample" style="color: #1e293b; font-size: 14px; font-style: italic; line-height: 1.5;">
                    "ì—„ë§ˆ, ë‚˜ í° ì•¡ì • ê¹¨ì ¸ì„œ ê¸‰í•˜ê²Œ ìˆ˜ë¦¬ ë§¡ê²¼ì–´. ì¸ì¦ í•„ìš”í•˜ë‹ˆê¹Œ ë‚´ ë¯¼ì¦ ì‚¬ì§„ ì¢€ ì°ì–´ì„œ ë³´ë‚´ì¤˜."
                </div>
            </div>
        </div>

        <p style="text-align:center; color:#64748b; margin-bottom: 15px; font-weight:600; font-size: 14px;">
            â–¼ ìœ„ ì‹œê¸°ì— ìœ í–‰í•œ ì£¼ìš” ìœ í˜• (í´ë¦­í•˜ì—¬ íë¦„ í™•ì¸)
        </p>

        <div class="filterBar">
            </div>

        <div class="flowBox">
          <div id="flowTitleText" style="text-align:center; font-weight:800; font-size:20px; margin-bottom:20px;">
            ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”
          </div>
          <div id="flowRenderArea"></div>
        </div>
    </div>
  </section>

  <section id="ai" class="view">
    <div class="card">
      <div class="sectionTitle"><h2>AI í”„ë¡œíŒŒì¼ë§</h2><span class="badge">Case Structuring</span></div>
      <div style="background: #f1f5f9; border-radius: 12px; padding: 20px; margin-bottom: 25px; border: 1px solid #e2e8f0; color: #475569; font-size: 15px; line-height: 1.6;">
            <strong>ğŸ’¡ AI í”„ë¡œíŒŒì¼ë§ì´ë€?</strong><br>
            ë‹¹ì‹ ì´ ë°›ì€ ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë¬¸ìë‚˜ í†µí™” ë‚´ìš©, ê·¸ëƒ¥ ë„˜ê¸°ì§€ ë§ˆì„¸ìš”.<br>
            eSCAPEì˜ AIê°€ ë°©ëŒ€í•œ ê³¼ê±° í”¼í•´ ì‚¬ë¡€ë“¤ê³¼ ëŒ€ì¡°í•˜ê³ , 9ê°€ì§€ ì •ë°€ ë‹¨ê³„ë¡œ ê¼¼ê¼¼í•˜ê²Œ ë”°ì ¸ë´…ë‹ˆë‹¤.<br>
            ì´ ë©”ì‹œì§€ê°€ ì‹¤ì œ ë²”ì£„ì™€ ì–¼ë§ˆë‚˜ ë¹„ìŠ·í•œì§€, ê·¸ë˜ì„œ ì§€ê¸ˆ ì–¼ë§ˆë‚˜ ìœ„í—˜í•œ ìƒí™©ì¸ì§€ ëª…ì¾Œí•˜ê²Œ íŒë³„í•´ ë“œë¦½ë‹ˆë‹¤.
        </div>
      <div style="margin-top:12px;">
        <label for="caseBody">ì‚¬ë¡€ ë‚´ìš© (í•„ìˆ˜)</label>
        <textarea id="caseBody" placeholder="ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë¬¸ì ë‚´ìš©ì´ë‚˜ í†µí™” ë‚´ìš©ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></textarea>
        <label for="fileUpload" class="file-upload-box">
            <span class="file-upload-icon">ğŸ“‚</span>
            <span class="file-upload-text" id="fileNameDisplay">ì´ë¯¸ì§€, ìŒì„± íŒŒì¼ ë“±ì„ ì´ê³³ì— ì—…ë¡œë“œí•˜ì„¸ìš” (í´ë¦­)</span>
            <input type="file" id="fileUpload" style="display:none;" onchange="handleFileSelect(this)">
        </label>
      </div>
      <div class="inline" style="margin-top:10px;">
        <button class="btn primary" type="button" onclick="requestAIAnalysis()" id="analyzeBtn">AI ë¶„ì„ ìš”ì²­</button>
        <button class="btn" type="button" onclick="resetAI()">ì´ˆê¸°í™”</button>
      </div>
      <div class="divider"></div>
      <div id="aiLoading" style="display:none; text-align:center; padding:20px;">
        <div class="loader"></div><p style="margin-top:10px; color:var(--muted);">AI ë¶„ì„ ì¤‘...</p>
      </div>
      <div id="aiResultContainer" style="display:none;">
        <div class="row">
          <div><label>ìš”ì•½</label><div id="resultSummary" class="status" style="width:100%; padding:12px;"></div></div>
          <div><label>íŒë‹¨ ê²°ê³¼</label><div class="inline" id="resultLabels"></div></div>
        </div>
        <div style="margin-top:12px;"><label>ìƒì„¸ ë¶„ì„</label><div id="resultStructure" class="status" style="width:100%; padding:12px; line-height:1.6;"></div></div>
        <div style="margin-top:12px;"><label>âš ï¸ ëŒ€ì‘ ê°€ì´ë“œ</label><div id="resultWarning" class="status risk-high" style="width:100%; padding:12px; font-weight:bold;"></div></div>
      </div>
    </div>
  </section>

  <section id="simulate" class="view">
    <div class="card">
      <div class="sectionTitle"><h2>ğŸ® í”¼ì‹± ëª¨ì˜ì²´í—˜ í›ˆë ¨</h2><select id="simScenario" style="width: auto; padding: 6px; font-size:14px;"><option value="ê¸°ê´€ ì‚¬ì¹­">ğŸ‘® ê²€ì°°ì²­ ì‚¬ì¹­ (ê³„ì¢Œ ë™ê²°)</option><option value="ìë…€ ì‚¬ì¹­">ğŸ‘§ ìë…€ ì‚¬ì¹­ (ì•¡ì • íŒŒì†)</option><option value="ë¡œë§¨ìŠ¤ ìŠ¤ìº ">ğŸ’˜ ë¡œë§¨ìŠ¤ ìŠ¤ìº  (í™˜ì‹¬ ì‚¬ê¸°)</option><option value="ëŒ€ì¶œ ë¹™ì">ğŸ’° ì €ê¸ˆë¦¬ ëŒ€ì¶œ (ì„ ì…ê¸ˆ ìš”êµ¬)</option></select></div>
      <p style="color:var(--muted); font-size:14px; margin-bottom:10px;">AIê°€ ì‹¤ì œ í”¼ì‹±ë²”ì²˜ëŸ¼ ì—°ê¸°í•©ë‹ˆë‹¤.</p>
      <div class="chat-container" id="chatContainer">
        <div class="chat-bubble ai">ì•ˆë…•í•˜ì„¸ìš”. ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„ íƒí•˜ê³  ì²« ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë³´ì„¸ìš”.</div>
      </div>
      <div class="input-group">
        <input type="text" id="chatInput" placeholder="ë‹µì¥ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="if(event.keyCode==13) sendChat()">
        <button class="btn primary" onclick="sendChat()" id="btnSend">ì „ì†¡</button>
      </div>
    </div>
  </section>

  <section id="auth" class="view">
    <div id="loginForm" class="auth-container">
        <div class="auth-title">ONE-ID í†µí•©ë¡œê·¸ì¸</div>
        <div class="auth-input"><label>ì•„ì´ë””</label><input type="text" id="loginId" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></div>
        <div class="auth-input"><label>ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="loginPw" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></div>
        <button class="auth-btn" onclick="performLogin()">ë¡œê·¸ì¸</button>
        <div class="auth-footer">ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <span onclick="toggleAuthForm('signup')">íšŒì›ê°€ì…</span></div>
    </div>
    <div id="signupForm" class="auth-container" style="display:none;">
        <div class="auth-title">íšŒì›ê°€ì…</div>
        <div class="auth-input"><label>ì•„ì´ë””</label><input type="text" placeholder="ì˜ë¬¸, ìˆ«ì ì¡°í•© 6~20ìë¦¬"></div>
        <div class="auth-input"><label>ë¹„ë°€ë²ˆí˜¸</label><input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"></div>
        <div class="auth-input"><label>ì´ë¦„</label><input type="text" placeholder="ì‹¤ëª… ì…ë ¥"></div>
        <div class="auth-input"><label>ì´ë©”ì¼</label><input type="email" placeholder="example@email.com"></div>
        <button class="auth-btn" onclick="performSignup()">ê°€ì…í•˜ê¸°</button>
        <div class="auth-footer">ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <span onclick="toggleAuthForm('login')">ë¡œê·¸ì¸</span></div>
    </div>
  </section>
</main>

<footer><div class="wrap"><div class="small">Â© <span id="y"></span> eSCAPE AI Security. All rights reserved.</div></div></footer>

<script>
  document.getElementById('y').textContent = new Date().getFullYear();
  const views = ["home", "archive", "ai", "simulate", "auth"]; 
  let isLoggedIn = false;
  let selectedFile = null;

  // 1. íŒŒì¼ ì„ íƒ í•¨ìˆ˜
  function handleFileSelect(input) {
      if(input.files && input.files[0]) {
          selectedFile = input.files[0]; 
          const displayEl = document.getElementById('fileNameDisplay');
          displayEl.innerText = `ğŸ“„ ${selectedFile.name}`;
          displayEl.style.color = "#26a69a"; 
          displayEl.style.fontWeight = "bold";
      }
  }

  // 2. í™”ë©´ ì „í™˜ í•¨ìˆ˜ (showView) - â˜… ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•´ì•¼ í•¨
  function showView(id){
    views.forEach(v => document.getElementById(v).classList.toggle('active', v === id));
    document.querySelectorAll('.nav-text').forEach(btn => btn.classList.toggle('active', btn.dataset.nav === id));
    window.scrollTo(0,0);
  }

  // 3. ë¡œê·¸ì¸ í™”ë©´ ì „í™˜
  function showAuth(type) { showView('auth'); toggleAuthForm(type); }

  // 4. í†µê³„ì²­ ìŠ¤íƒ€ì¼ ë²„íŠ¼ í™œì„±í™”
  function highlightBtn(el) {
      document.querySelectorAll('.kosis-btn').forEach(b => b.classList.remove('active'));
      el.classList.add('active');
  }

  // 5. ì—°ë„ ìŠ¬ë¼ì´ë” ë³€ê²½ í•¨ìˆ˜ - â˜… showView ë°–ìœ¼ë¡œ êº¼ë‚´ì„œ ë…ë¦½ì‹œí‚´!
  function handleYearChange(year) {
      // 1. ì—°ë„ ìˆ«ì í‘œì‹œ
      document.getElementById('displayYear').innerText = year;

      // 2. ì‹œëŒ€ë³„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (10ë…„ ë‹¨ìœ„ ë§¤í•‘)
      let eraKey = 1990;
      if (year >= 2020) eraKey = 2020;
      else if (year >= 2010) eraKey = 2010;
      else if (year >= 2000) eraKey = 2000;

      const data = eraData[eraKey];

      // 3. ì •ë³´ ë°•ìŠ¤ ë‚´ìš© ì—…ë°ì´íŠ¸ (ìŠ¤ì¼€ì¹˜ ìš”ì²­ ì‚¬í•­)
      document.getElementById('yearEraBadge').innerText = data.era;
      document.getElementById('yearSummaryTitle').innerText = data.title;
      document.getElementById('yearDescription').innerText = data.desc;
      document.getElementById('yearCaseExample').innerText = data.case;
      
      // í‚¤ì›Œë“œ ë°°ì§€ ë§Œë“¤ê¸°
      const kwArea = document.getElementById('yearKeywords');
      kwArea.innerHTML = data.keywords.map(kw => 
          `<span style="background: #e0f2f1; color: #00695c; padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 700;">#${kw}</span>`
      ).join('');

      // 4. í•˜ë‹¨ ë²„íŠ¼ ëœë¤ ì„ê¸° (3~4ê°œ)
      const allTypes = Object.keys(scamFlows);
      const count = Math.floor(Math.random() * 2) + 3; 
      const shuffled = allTypes.sort(() => 0.5 - Math.random());
      const selected = shuffled.slice(0, count);

      // 5. ë²„íŠ¼ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
      const filterBar = document.querySelector('#archive .filterBar');
      if(filterBar) {
          filterBar.innerHTML = selected.map((type, index) => {
              const activeClass = index === 0 ? 'active' : '';
              return `<span class="tag ${activeClass}" onclick="renderFlow('${type}'); activeTag(this)">${scamFlows[type].title}</span>`;
          }).join('');
          
          // ì²« ë²ˆì§¸ ê±¸ë¡œ íë¦„ë„ ìë™ ê°±ì‹ 
          renderFlow(selected[0]);
      }
  
  // ê¸°ì¡´ showView í•¨ìˆ˜ëŠ” ì´ë ‡ê²Œ ë…ë¦½ì ìœ¼ë¡œ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
  function showView(id){
    views.forEach(v => document.getElementById(v).classList.toggle('active', v === id));
    document.querySelectorAll('.nav-text').forEach(btn => btn.classList.toggle('active', btn.dataset.nav === id));
    window.scrollTo(0,0);
  }
    // ë©”ì¸í™”ë©´ ì´ˆê¸°í™” ë¡œì§ì€ í•„ìš”ì—†ìœ¼ë¯€ë¡œ ì œê±°
    window.scrollTo(0,0);
  }
  function showAuth(type) { showView('auth'); toggleAuthForm(type); }

  // [ì¶”ê°€] í†µê³„ì²­ ìŠ¤íƒ€ì¼ ì•„ì´ì½˜ ë²„íŠ¼ í´ë¦­ ì‹œ í™œì„±í™” íš¨ê³¼
  function highlightBtn(el) {
      document.querySelectorAll('.kosis-btn').forEach(b => b.classList.remove('active'));
      el.classList.add('active');
  }
  const eraData = {
      1990: {
          era: "1990ë…„ëŒ€",
          title: "ë‹¨ìˆœ ê¸°ë§í˜• ì‚¬ê¸°ì˜ íƒœë™",
          keywords: ["ê²½í’ˆ ë‹¹ì²¨", "ì„¸ê¸ˆ í™˜ê¸‰", "ARS ì‚¬ê¸°"],
          desc: "ë¶ˆíŠ¹ì • ë‹¤ìˆ˜ì—ê²Œ ì „í™”ë¥¼ ê±¸ì–´ ì„¸ê¸ˆì„ í™˜ê¸‰í•´ì£¼ê±°ë‚˜ ê²½í’ˆì— ë‹¹ì²¨ë˜ì—ˆë‹¤ê³  ì†ì—¬ ATMê¸°ê¸°ë¡œ ìœ ì¸í•˜ëŠ” ì´ˆê¸° í˜•íƒœì…ë‹ˆë‹¤.",
          case: "'ì¶•í•˜í•©ë‹ˆë‹¤! ë°±í™”ì  ê²½í’ˆ í–‰ì‚¬ì— ë‹¹ì²¨ë˜ì…¨ìŠµë‹ˆë‹¤. ì œì„¸ê³µê³¼ê¸ˆì„ ì…ê¸ˆí•˜ì‹œë©´ ìƒí’ˆì„ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.'"
      },
      2000: {
          era: "2000ë…„ëŒ€",
          title: "ê³µí¬ì‹¬ ìœ ë°œ ë° ë³´ì´ìŠ¤í”¼ì‹± ë³¸ê²©í™”",
          keywords: ["ìë…€ ë‚©ì¹˜ ë¹™ì", "ìš°ì²´êµ­ ì‚¬ì¹­", "ê³„ì¢Œ ì•ˆì „ ì¡°ì¹˜"],
          desc: "ê°€ì¡±ì„ ë‚©ì¹˜í–ˆë‹¤ë©° ê³µí¬ì‹¬ì„ ìê·¹í•˜ê±°ë‚˜, ìˆ˜ì‚¬ê¸°ê´€ì„ ì‚¬ì¹­í•´ ì•ˆì „ ê³„ì¢Œë¡œ ì´ì²´ë¥¼ ìœ ë„í•˜ëŠ” ë°©ì‹ì´ ê¸‰ì¦í–ˆìŠµë‹ˆë‹¤.",
          case: "'ë‹¹ì‹  ì•„ë“¤ì„ ë°ë¦¬ê³  ìˆë‹¤. ì§€ê¸ˆ ë‹¹ì¥ 1,000ë§Œì›ì„ ì…ê¸ˆí•˜ì§€ ì•Šìœ¼ë©´ ì†ê°€ë½ì„ ìë¥´ê² ë‹¤.'"
      },
      2010: {
          era: "2010ë…„ëŒ€",
          title: "ëŒ€ì¶œ ë¹™ì ë° ì •êµí•œ ì‚¬ì¹­",
          keywords: ["ì €ê¸ˆë¦¬ ëŒ€í™˜ëŒ€ì¶œ", "ê¹€ë¯¼ìˆ˜ ê²€ì‚¬", "ê°€ì§œ ê³µë¬¸"],
          desc: "ê²½ì œì  ì–´ë ¤ì›€ì„ ê²ªëŠ” ì„œë¯¼ë“¤ì—ê²Œ ì •ë¶€ ì§€ì› ì €ê¸ˆë¦¬ ëŒ€ì¶œì„ ë¯¸ë¼ë¡œ ì ‘ê·¼í•˜ê±°ë‚˜, ìœ„ì¡°ëœ ê³µë¬¸ì„ ì‚¬ìš©í•´ ì‹ ë¢°ë¥¼ ì–»ìŠµë‹ˆë‹¤.",
          case: "'ì„œìš¸ì¤‘ì•™ì§€ê²€ì…ë‹ˆë‹¤. ê·€í•˜ì˜ ê³„ì¢Œê°€ ë²”ì£„ ìê¸ˆ ì„¸íƒì— ì—°ë£¨ë˜ì–´ ì¡°ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.'"
      },
      2020: {
          era: "2020ë…„ëŒ€",
          title: "ì´ˆê°œì¸í™” & AI ê¸°ìˆ  ë²”ì£„",
          keywords: ["ë”¥í˜ì´í¬", "ë¡œë§¨ìŠ¤ìŠ¤ìº ", "ë¶€ê³ /ì²­ì²©ì¥ ìŠ¤ë¯¸ì‹±"],
          desc: "AIë¡œ ëª©ì†Œë¦¬ë‚˜ ì–¼êµ´ì„ í•©ì„±(ë”¥í˜ì´í¬)í•˜ê±°ë‚˜, ì§€ì¸ì˜ ë¶€ê³ /ì²­ì²©ì¥ì„ ê°€ì¥í•œ ì•…ì„± ë§í¬(ìŠ¤ë¯¸ì‹±)ë¡œ ì •ë³´ë¥¼ íƒˆì·¨í•©ë‹ˆë‹¤.",
          case: "'(ë”¸ ëª©ì†Œë¦¬ë¡œ) ì•„ë¹ , ë‚˜ í° ìƒì–´ë²„ë ¤ì„œ ê¸‰í•œë° í¸ì˜ì  ê°€ì„œ ê¸°í”„íŠ¸ì¹´ë“œ ì¢€ ì‚¬ì„œ ë³´ë‚´ì¤˜.'"
      }
  };
  // [ë°ì´í„°] ìƒì„¸ ì„¤ëª… í…ìŠ¤íŠ¸
  const scamFlows = {
    "voice": { title: "ë³´ì´ìŠ¤í”¼ì‹±", desc: "ìˆ˜ì‚¬ê¸°ê´€/ê¸ˆìœµê¶Œ ì‚¬ì¹­, ì‹¬ë¦¬ì  ì••ë°•, ì œ3ì ì ‘ì´‰ ì°¨ë‹¨ì´ í•µì‹¬ì…ë‹ˆë‹¤.", steps: ["ì¤€ë¹„", "ì ‘ì´‰", "ì‹ ë¢°", "ê³ ë¦½", "í–‰ë™í†µì œ", "íƒˆì·¨"], icons: ["ğŸ“", "ğŸ“", "ğŸ¤", "ğŸ”’", "ğŸ®", "ğŸ’¸"], details: ["ë¶ˆë²• ê±°ë˜ëœ ê°œì¸ì •ë³´(DB)ë¥¼ êµ¬ë§¤í•˜ê³ , ê²€ì°°/ê²½ì°°/ì€í–‰ì› ì‚¬ì¹­ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.", "070 ë²ˆí˜¸ë¥¼ 010ìœ¼ë¡œ ë³€ì‘í•˜ì—¬ í”¼í•´ìì—ê²Œ ì „í™”ë¥¼ ê±¸ê³ , ìˆ˜ì‚¬ê¸°ê´€ì„ ì‚¬ì¹­í•´ ê¸´ì¥ê°ì„ ì¡°ì„±í•©ë‹ˆë‹¤.", "ìœ„ì¡°ëœ ê³µë¬¸ì´ë‚˜ ì‹ ë¶„ì¦ ì‚¬ì§„ì„ ì „ì†¡í•˜ì—¬ í”¼í•´ìê°€ ìˆ˜ì‚¬ê´€ì„ì„ ë¯¿ê²Œ ë§Œë“­ë‹ˆë‹¤.", "ë³´ì•ˆ ìœ ì§€ë¥¼ í•‘ê³„ë¡œ ì£¼ë³€(ê°€ì¡±, ì€í–‰ì°½êµ¬ ì§ì›)ê³¼ì˜ ëŒ€í™”ë¥¼ ì°¨ë‹¨í•˜ê³  ì „í™”ë¥¼ ëŠì§€ ëª»í•˜ê²Œ í•©ë‹ˆë‹¤.", "ì•…ì„± ì•± ì„¤ì¹˜ë¥¼ ìœ ë„í•˜ì—¬ íœ´ëŒ€í°ì„ ì œì–´í•˜ê±°ë‚˜, íŒë‹¨ë ¥ì„ íë¦¬ê²Œ í•˜ì—¬ ì§€ì‹œëŒ€ë¡œ ì›€ì§ì´ê²Œ í•©ë‹ˆë‹¤.", "ì•ˆì „ ê³„ì¢Œ ì´ì²´, í˜„ê¸ˆ ì „ë‹¬, ìƒí’ˆê¶Œ í•€ë²ˆí˜¸ ì „ì†¡ ë“±ì„ í†µí•´ ìê¸ˆì„ íƒˆì·¨í•©ë‹ˆë‹¤."] },
    "messenger": { title: "ë©”ì‹ ì €í”¼ì‹±", desc: "ì¹´í†¡/SNS í™œìš©, ê°€ì¡±/ì§€ì¸ ì‚¬ì¹­(í° ê³ ì¥ ë“±)í•˜ì—¬ ê¸´ê¸‰ ì†¡ê¸ˆì„ ìš”ì²­í•©ë‹ˆë‹¤.", steps: ["ì¤€ë¹„", "ì ‘ì´‰", "ì‹ ë¢°(ì§€ì¸)", "ì •ë³´ìˆ˜ì§‘", "íƒˆì·¨"], icons: ["ğŸ“", "ğŸ“±", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "ğŸ•µï¸", "ğŸ’¸"], details: ["í¬í„¸ ì‚¬ì´íŠ¸ í•´í‚¹ ë“±ì„ í†µí•´ í”¼í•´ì ì§€ì¸ì˜ í”„ë¡œí•„ ì‚¬ì§„ê³¼ ë§íˆ¬ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.", "ìƒˆë¡œìš´ ë²ˆí˜¸ë‚˜ ì¹´í†¡ ê³„ì •ìœ¼ë¡œ 'ì—„ë§ˆ ë‚˜ í° ê³ ì¥ë‚¬ì–´'ë¼ë©° ì ‘ê·¼í•©ë‹ˆë‹¤.", "ê¸‰í•œ ìƒí™©(ì•¡ì • ìˆ˜ë¦¬ë¹„, ë¬¸í™”ìƒí’ˆê¶Œ)ì„ ì—°ì¶œí•˜ì—¬ ì˜ì‹¬í•  í‹ˆì„ ì£¼ì§€ ì•Šê³  ë¶€ëª¨ ìì‹ ê´€ê³„ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.", "ê²°ì œë‚˜ ì¸ì¦ì„ ìœ„í•´ ì‹ ë¶„ì¦ ì‚¬ì§„ì´ë‚˜ ì‹ ìš©ì¹´ë“œ ë²ˆí˜¸, ë¹„ë°€ë²ˆí˜¸ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.", "ëŒ€í¬ í†µì¥ìœ¼ë¡œ ì´ì²´ë°›ê±°ë‚˜, ì›ê²© ì œì–´ ì•±ì„ ì„¤ì¹˜í•´ ì§ì ‘ ìê¸ˆì„ ë¹¼ê°‘ë‹ˆë‹¤."] },
    "site": { title: "í”¼ì‹±ì‚¬ì´íŠ¸", desc: "ê°€ì§œ í™ˆí˜ì´ì§€ë¡œ ìœ ë„í•˜ì—¬ ë³´ì•ˆì¹´ë“œ ë“± ê¸ˆìœµì •ë³´ ì…ë ¥ì„ ìœ ë„í•©ë‹ˆë‹¤.", steps: ["ì¤€ë¹„", "ì ‘ì´‰", "íƒìƒ‰", "ì •ë³´ìˆ˜ì§‘", "íƒˆì·¨"], icons: ["ğŸ’»", "ğŸ”—", "ğŸ”", "âŒ¨ï¸", "ğŸ’¸"], details: ["ì‹¤ì œ ì •ë¶€ê¸°ê´€, ì€í–‰, í¬í„¸ê³¼ ë˜‘ê°™ì´ ìƒê¸´ ê°€ì§œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì œì‘í•©ë‹ˆë‹¤.", "ë¬¸ì(URL í¬í•¨)ë‚˜ ì´ë©”ì¼ì„ í†µí•´ 'ë³´ì•ˆ ìŠ¹ê¸‰', 'ì €ê¸ˆë¦¬ ëŒ€ì¶œ' ë¯¸ë¼ë¡œ ì ‘ì†ì„ ìœ ë„í•©ë‹ˆë‹¤.", "í”¼í•´ìê°€ ê°€ì§œ ì‚¬ì´íŠ¸ë¥¼ ì§„ì§œë¡œ ì˜¤ì¸í•˜ê³  ë©”ë‰´ë¥¼ í´ë¦­í•˜ë©° íƒìƒ‰í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.", "ë¡œê·¸ì¸ ì •ë³´, ë³´ì•ˆì¹´ë“œ ë²ˆí˜¸, ê³„ì¢Œ ë¹„ë°€ë²ˆí˜¸ ë“± ë¯¼ê°í•œ ê¸ˆìœµ ì •ë³´ë¥¼ ì…ë ¥í•˜ê²Œ í•©ë‹ˆë‹¤.", "ìˆ˜ì§‘ëœ ì •ë³´ë¥¼ ì´ìš©í•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ìê¸ˆì„ ì´ì²´í•˜ê±°ë‚˜ ì†Œì•¡ ê²°ì œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤."] },
    "bodycam": { title: "ëª¸ìº í”¼ì‹±", desc: "ì•…ì„± ì•± ì„¤ì¹˜ ìœ ë„ í›„ ì—°ë½ì²˜ íƒˆì·¨, ë…¹í™” ì˜ìƒì„ ìœ í¬í•˜ê² ë‹¤ê³  í˜‘ë°•í•©ë‹ˆë‹¤.", steps: ["ì¤€ë¹„", "ì ‘ì´‰", "ì‹ ë¢°", "ê¸°ê¸°ì œì–´", "ì •ë³´ìˆ˜ì§‘", "í–‰ë™í†µì œ", "íƒˆì·¨"], icons: ["ğŸ“¹", "ğŸ’¬", "â¤ï¸", "ğŸ“²", "ğŸ“‚", "ğŸ¤¬", "ğŸ’¸"], details: ["ëœë¤ ì±„íŒ… ì•±ì´ë‚˜ SNSì—ì„œ ì—¬ì„±(í˜¹ì€ ë‚¨ì„±)ìœ¼ë¡œ ê°€ì¥í•œ í”„ë¡œí•„ì„ ìƒì„±í•©ë‹ˆë‹¤.", "ì˜ìƒ í†µí™”ë¥¼ ì œì•ˆí•˜ë©° í”¼í•´ìì—ê²Œ ì ‘ê·¼í•©ë‹ˆë‹¤.", "ì¹œë°€ê°ì„ ìŒ“ìœ¼ë©° ì„œë¡œì˜ ì•Œëª¸ì´ë‚˜ ìŒë€ í–‰ìœ„ë¥¼ ë³´ì—¬ì£¼ìê³  ìœ ë„í•©ë‹ˆë‹¤.", "í™”ì§ˆ ê°œì„ , ì˜¤ë””ì˜¤ ì˜¤ë¥˜ ë“±ì„ í•‘ê³„ë¡œ ì•…ì„± íŒŒì¼(APK) ì„¤ì¹˜ë¥¼ ìœ ë„í•©ë‹ˆë‹¤.", "ì„¤ì¹˜ëœ ì•±ì„ í†µí•´ í”¼í•´ìì˜ ì—°ë½ì²˜(ê°€ì¡±, ì§ì¥ë™ë£Œ ë“±)ë¥¼ ëª¨ë‘ íƒˆì·¨í•©ë‹ˆë‹¤.", "ì˜ìƒì„ ë…¹í™”í•œ ë’¤, ì§€ì¸ë“¤ì—ê²Œ ìœ í¬í•˜ê² ë‹¤ê³  í˜‘ë°•í•˜ë©° ì‹¬ë¦¬ì ìœ¼ë¡œ ì••ë°•í•©ë‹ˆë‹¤.", "ì˜ìƒ ì‚­ì œë¥¼ ì¡°ê±´ìœ¼ë¡œ ê±°ì•¡ì˜ ëˆì„ ì†¡ê¸ˆí•˜ë„ë¡ ê°•ìš”í•©ë‹ˆë‹¤."] },
    "romance": { title: "ë¡œë§¨ìŠ¤ìŠ¤ìº ", desc: "SNSë¡œ ì ‘ê·¼í•´ ì¥ê¸°ê°„ ì‹ ë¢°(ì—°ì¸ ê´€ê³„)ë¥¼ ìŒ“ì€ í›„, êµì œ/ê²°í˜¼ì„ ë¹™ìí•´ ëˆì„ ìš”êµ¬í•©ë‹ˆë‹¤.", steps: ["ì¤€ë¹„", "ì ‘ì´‰", "ì‹ ë¢°(í˜¸ê°)", "í–‰ë™í†µì œ", "íƒˆì·¨"], icons: ["ğŸ¤µ", "ğŸ’Œ", "ğŸ˜", "ğŸ’", "ğŸ’¸"], details: ["í•´ì™¸ íŒŒë³‘ êµ°ì¸, ì˜ì‚¬, ì¬ë ¥ê°€ ë“± ë§¤ë ¥ì ì¸ ê°€ì§œ í”„ë¡œí•„ì„ ìƒì„±í•©ë‹ˆë‹¤.", "SNS(ì¸ìŠ¤íƒ€, í˜ë¶) DMì´ë‚˜ ë°ì´íŒ… ì•±ì„ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ ë§ì„ ê²ë‹ˆë‹¤.", "ë§¤ì¼ ì—°ë½í•˜ë©° ì—°ì¸ ê´€ê³„ë¥¼ í˜•ì„±í•˜ê³ , ì˜ìƒ í†µí™”(ë”¥í˜ì´í¬ ë“±)ë¡œ ì‹ ë¢°ë¥¼ ìŒ“ìŠµë‹ˆë‹¤.", "ê²°í˜¼ ì•½ì†, í•œêµ­ ë°©ë¬¸ ì„ ë¬¼ ë°°ì†¡ë¹„, ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì‚¬ê³  ë“±ì„ í•‘ê³„ë¡œ ë™ì •ì‹¬ì„ ìœ ë°œí•©ë‹ˆë‹¤.", "ê´€ì„¸, ìˆ˜ìˆ ë¹„, í•­ê³µë£Œ ëª…ëª©ìœ¼ë¡œ ì§€ì†ì ìœ¼ë¡œ ê¸ˆì „ì„ ìš”êµ¬í•˜ê³  ì†¡ê¸ˆì„ ë°›ìŠµë‹ˆë‹¤."] },
    "deepfake": { title: "ë”¥í˜ì´í¬", desc: "AI í•©ì„± ê¸°ìˆ (ëª©ì†Œë¦¬/ì–¼êµ´)ë¡œ ì§€ì¸ì„ ì™„ë²½íˆ ì‚¬ì¹­í•˜ì—¬ ì‹ ë¢°ë„ë¥¼ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.", steps: ["ì¤€ë¹„", "ì ‘ì´‰", "ì‹ ë¢°(ê¸°ìˆ )", "í–‰ë™í†µì œ", "íƒˆì·¨"], icons: ["ğŸ¤–", "ğŸ¥", "ğŸ—£ï¸", "ğŸ˜¨", "ğŸ’¸"], details: ["í”¼í•´ì ì§€ì¸ì˜ SNS ì‚¬ì§„ì´ë‚˜ ëª©ì†Œë¦¬ ìƒ˜í”Œì„ ìˆ˜ì§‘í•´ AI ëª¨ë¸ì„ í•™ìŠµì‹œí‚µë‹ˆë‹¤.", "ì˜ìƒ í†µí™”ë‚˜ ìŒì„± ì „í™”ë¥¼ ê±¸ì–´ ì§€ì¸ì¸ ì²™ ì ‘ê·¼í•©ë‹ˆë‹¤.", "í™”ë©´ì— ë³´ì´ëŠ” ì–¼êµ´ì´ë‚˜ ë“¤ë¦¬ëŠ” ëª©ì†Œë¦¬ê°€ ì§€ì¸ê³¼ ë˜‘ê°™ì•„ í”¼í•´ìê°€ ì¦‰ì‹œ ì‹ ë¢°í•˜ê²Œ ë©ë‹ˆë‹¤.", "ê¸‰ë°•í•œ ìƒí™©(ë‚©ì¹˜, ì‚¬ê³  ë“±)ì„ ì—°ì¶œí•˜ì—¬ ì´ì„±ì ì¸ íŒë‹¨ì„ ëª»í•˜ê²Œ ë§‰ìŠµë‹ˆë‹¤.", "ì˜ì‹¬ ì—†ì´ ì¦‰ì‹œ ì†¡ê¸ˆí•˜ë„ë¡ ìœ ë„í•˜ì—¬ ìê¸ˆì„ íƒˆì·¨í•©ë‹ˆë‹¤."] },
    "loan": { title: "ëŒ€ì¶œë¹™ì", desc: "ì €ê¸ˆë¦¬ ëŒ€í™˜ëŒ€ì¶œ ë¯¸ë¼ë¡œ ê°ì¢… ìˆ˜ìˆ˜ë£Œ ë° ì„ ì…ê¸ˆ ìš”êµ¬", steps: ["DBí™•ë³´", "ê¶Œìœ ", "ìƒë‹´", "ìš”êµ¬", "íƒˆì·¨"], icons: ["ğŸ“‚", "ğŸ“", "ğŸ—£ï¸", "ğŸ’°", "ğŸ’¸"], details: ["ëŒ€ì¶œì´ ê±°ì ˆë˜ì—ˆê±°ë‚˜ ê³ ê¸ˆë¦¬ ëŒ€ì¶œ ì´ìš©ìë“¤ì˜ ê°œì¸ì •ë³´ë¥¼ í™•ë³´í•˜ì—¬ ë²”ì£„ íƒ€ê²Ÿ ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.", "ì •ë¶€ ì§€ì›ê¸ˆì´ë‚˜ ì‹œì¤‘ ì€í–‰ì„ ì‚¬ì¹­í•˜ì—¬ 'ì €ê¸ˆë¦¬ ì „í™˜ ëŒ€ì¶œ í™•ì •'ì´ë¼ëŠ” ìê·¹ì ì¸ ë¬¸ìë¥¼ ëŒ€ëŸ‰ìœ¼ë¡œ ë°œì†¡í•©ë‹ˆë‹¤.", "ìƒë‹´ì›ì„ ì‚¬ì¹­í•´ ê¸°ì¡´ ëŒ€ì¶œ ìƒí™˜ì´ í•„ìš”í•˜ë‹¤ê±°ë‚˜, ì‹ ìš© ë“±ê¸‰ ìƒí–¥ì„ ìœ„í•œ ê±°ë˜ ì‹¤ì ì´ í•„ìš”í•˜ë‹¤ê³  ì†ì…ë‹ˆë‹¤.", "ë³´ì¦ê¸ˆ, ì¸ì§€ì„¸, ì „ì‚° ë“±ë¡ ë¹„ìš© ë“± ê°ì¢… ëª…ëª©ì˜ ì„ ì…ê¸ˆì„ ìš”êµ¬í•˜ë©° ì…ê¸ˆ ì‹œ ì¦‰ì‹œ ëŒ€ì¶œê¸ˆì´ ì‹¤í–‰ëœë‹¤ê³  ì•ˆì‹¬ì‹œí‚µë‹ˆë‹¤.", "í”¼í•´ìê°€ ì„ ì…ê¸ˆì„ ì™„ë£Œí•˜ë©´ ìƒë‹´ ì¤‘ì´ë˜ ëª¨ë“  ì—°ë½ì²˜ë¥¼ ì°¨ë‹¨í•˜ê³  ê°€ë¡œì±ˆ ëˆì„ ì„¸íƒí•˜ì—¬ ì‚¬ë¼ì§‘ë‹ˆë‹¤."] },
    "invest": { title: "íˆ¬ìë¦¬ë”©ë°©", desc: "ê³ ìˆ˜ìµ ë³´ì¥ ê°€ì§œ íˆ¬ì ì‚¬ì´íŠ¸ ìœ ë„ ë° í™˜ì „ ê±°ë¶€", steps: ["í™ë³´", "ì´ˆëŒ€", "ë°”ëŒì¡ì´", "ì¸ì¦", "ì…ê¸ˆ", "ì°¨ë‹¨"], icons: ["ğŸ“ˆ", "ğŸ’¬", "ğŸ‘¥", "ğŸ’µ", "ğŸ¦", "ğŸš«"], details: ["ìœ íŠœë¸Œ ê´‘ê³ ë‚˜ ë¬¸ìë¥¼ í†µí•´ 'ìˆ˜ìµë¥  500% ë³´ì¥', 'ë¹„ë°€ ê¸‰ë“±ì£¼ ê³µê°œ' ë“±ì˜ í—ˆìœ„ ì •ë³´ë¥¼ í™ë³´í•©ë‹ˆë‹¤.", "í”¼í•´ìë¥¼ ì˜¤í”ˆ ì±„íŒ…ë°©(ë¦¬ë”©ë°©)ìœ¼ë¡œ ì´ˆëŒ€í•˜ê³ , ìˆ˜ì‹­ ëª…ì˜ ë°”ëŒì¡ì´ê°€ ê°€ì§œ ìˆ˜ìµ ì¸ì¦ìƒ·ì„ ì˜¬ë¦¬ë©° ë¶„ìœ„ê¸°ë¥¼ ì¡°ì¥í•©ë‹ˆë‹¤.", "ìì‹ ë“¤ì´ ìì²´ ê°œë°œí•œ ê°€ì§œ íˆ¬ì ì‚¬ì´íŠ¸ë‚˜ ì•±ì— ê°€ì…í•˜ê²Œ í•˜ì—¬ ì†Œì•¡ìœ¼ë¡œ ìˆ˜ìµì´ ë‚˜ëŠ” ê²ƒì²˜ëŸ¼ ìˆ˜ì¹˜ë¥¼ ì¡°ì‘í•´ ë³´ì—¬ì¤ë‹ˆë‹¤.", "ìˆ˜ìµì— í™•ì‹ ì„ ê°€ì§„ í”¼í•´ìê°€ í° ì•¡ìˆ˜ì˜ íˆ¬ìê¸ˆì„ ì…ê¸ˆí•˜ê²Œ ìœ ë„í•˜ê³ , ê³„ì¢Œì— ê±°ì•¡ì´ ìŒ“ì´ëŠ” ê²ƒì²˜ëŸ¼ í™”ë©´ì„ ì—°ì¶œí•©ë‹ˆë‹¤.", "í”¼í•´ìê°€ ì¶œê¸ˆì„ ìš”ì²­í•˜ë©´ ì„¸ê¸ˆ, ìˆ˜ìˆ˜ë£Œ, ìˆ˜ì‚¬ê¸°ê´€ ì¡°ì‚¬ ë“±ì„ í•‘ê³„ë¡œ ì¶”ê°€ ì…ê¸ˆì„ ìš”êµ¬í•˜ë©° ëë‚´ í™˜ì „ì„ ê±°ë¶€í•˜ê³  ê°•ì œ í‡´ì¥ì‹œí‚µë‹ˆë‹¤."] },
    "smishing": { title: "ìŠ¤ë¯¸ì‹±", desc: "íƒë°°/ë¶€ê³ /ì²­ì²©ì¥ URL í´ë¦­ ìœ ë„ í›„ ì•…ì„± ì•± ê°ì—¼", steps: ["ë°œì†¡", "í´ë¦­", "ê°ì—¼", "ì œì–´", "ì†Œì•¡ê²°ì œ"], icons: ["ğŸ“©", "ğŸ‘†", "ğŸ¦ ", "ğŸ“±", "ğŸ’¸"], details: ["ì£¼ì†Œì§€ ë¶ˆëª… íƒë°°, ì§€ì¸ì˜ ë¶€ê³  ì•Œë¦¼, ì²­ì²©ì¥ ë“± ëˆ„êµ¬ë‚˜ ëˆŒëŸ¬ë³¼ ë§Œí•œ ì¼ìƒì ì¸ ë‚´ìš©ì˜ ë¬¸ìë¥¼ ë¬´ì‘ìœ„ë¡œ ë°œì†¡í•©ë‹ˆë‹¤.", "ë¬¸ìì— í¬í•¨ëœ ë‹¨ì¶• URLì„ í´ë¦­í•˜ë©´ ì •ì‹ ì•± ìŠ¤í† ì–´ê°€ ì•„ë‹Œ ì‚¬ì„¤ ì„œë²„ì—ì„œ ì•…ì„± ì„¤ì¹˜ íŒŒì¼(APK)ì´ ë‚´ë ¤ë°›ì•„ì§‘ë‹ˆë‹¤.", "ì„¤ì¹˜ëœ ì•…ì„± ì•±ì€ íœ´ëŒ€í°ì˜ ëª¨ë“  ê¶Œí•œì„ ê°€ë¡œì±„ê³  ë¬¸ì ë©”ì‹œì§€, ì—°ë½ì²˜, ìœ„ì¹˜ ì •ë³´, í†µí™” ê¸°ë¡ ë“±ì„ ì„œë²„ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.", "ì‚¬ê¸°ë²”ì€ í”¼í•´ìì˜ íœ´ëŒ€í°ì„ ì›ê²©ìœ¼ë¡œ ì œì–´í•˜ê±°ë‚˜ ì¸ì¦ ë²ˆí˜¸ë¥¼ ê°€ë¡œì±„ì–´ ì§ì ‘ ê¸ˆìœµ ê±°ë˜ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.", "í”¼í•´ì ëª°ë˜ íœ´ëŒ€í° ì†Œì•¡ ê²°ì œë¥¼ í•œë„ê¹Œì§€ ì§„í–‰í•˜ê±°ë‚˜, ë¹„ëŒ€ë©´ ê³„ì¢Œë¥¼ ê°œì„¤í•˜ì—¬ ìê¸ˆì„ ë¹¼ëŒë¦¬ëŠ” ë“± ë§‰ëŒ€í•œ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤."] }
  };

  function renderFlow(type) {
    const data = scamFlows[type] || scamFlows['romance'];
    // ë©”ì¸í™”ë©´ í•˜ë‹¨ íë¦„ë„ ì—…ë°ì´íŠ¸
    const mainTitle = document.querySelector('#home #flowTitleText');
    const mainArea = document.querySelector('#home #flowRenderArea');
    if(mainTitle && mainArea) {
        mainTitle.innerText = `${data.title} ì „ê°œ íë¦„`;
        let html = `<div class="flow-container">`;
        data.steps.forEach((step, index) => {
            if (index > 0) html += `<div class="step-arrow">â†’</div>`;
            html += `<div class="step-card" onclick="renderStepDetail('${type}', ${index})"><span class="step-icon">${data.icons[index] || 'âšª'}</span><span class="step-title">${step}</span></div>`;
        });
        html += `</div><div class="flow-desc">ğŸ’¡ íŠ¹ì§•: ${data.desc}</div>`;
        mainArea.innerHTML = html;
    }

    // ì•„ì¹´ì´ë¸Œ í™”ë©´ íë¦„ë„ ì—…ë°ì´íŠ¸ (ê¸°ì¡´ ìœ ì§€)
    const archiveTitle = document.querySelector('#archive #flowTitleText');
    const archiveArea = document.querySelector('#archive #flowRenderArea');
    if(archiveTitle && archiveArea) {
        archiveTitle.innerText = `${data.title} ì „ê°œ íë¦„`;
        let html = `<div class="flow-container">`;
        data.steps.forEach((step, index) => {
            if (index > 0) html += `<div class="step-arrow">â†’</div>`;
            html += `<div class="step-card" onclick="renderStepDetail('${type}', ${index})"><span class="step-icon">${data.icons[index] || 'âšª'}</span><span class="step-title">${step}</span></div>`;
        });
        html += `</div><div class="flow-desc">ğŸ’¡ íŠ¹ì§•: ${data.desc}</div>`;
        archiveArea.innerHTML = html;
    }
  }

  function renderStepDetail(type, idx) {
      const data = scamFlows[type];
      const html = `<div class="step-detail-container"><div style="font-size:60px;">${data.icons[idx]}</div><h3>STEP ${idx+1}. ${data.steps[idx]}</h3><p class="detail-text">${data.details[idx]}</p><button class="back-btn" onclick="renderFlow('${type}')">â† ëŒì•„ê°€ê¸°</button></div>`;
      
      const mainArea = document.querySelector('#home #flowRenderArea');
      if(mainArea) mainArea.innerHTML = html;

      const archiveArea = document.querySelector('#archive #flowRenderArea');
      if(archiveArea) archiveArea.innerHTML = html;
  }
  
  function activeTag(el) { document.querySelectorAll('.filterBar .tag').forEach(t=>t.classList.remove('active')); el.classList.add('active'); }

  // ì´ˆê¸° ì‹¤í–‰
  renderFlow('romance');

  function resetAI() {
      document.getElementById('caseBody').value = '';
      document.getElementById('fileUpload').value = ''; 
      selectedFile = null;
      const displayEl = document.getElementById('fileNameDisplay');
      displayEl.innerText = 'ì´ë¯¸ì§€, ìŒì„± íŒŒì¼ ë“±ì„ ì´ê³³ì— ì—…ë¡œë“œí•˜ì„¸ìš” (í´ë¦­)';
      displayEl.style.color = '#64748b';
      displayEl.style.fontWeight = 'normal';
      document.getElementById('aiResultContainer').style.display = 'none';
      document.getElementById('aiLoading').style.display = 'none';
  }

  async function requestAIAnalysis() {
    const text = document.getElementById('caseBody').value;
    
    if (!text && !selectedFile) { 
        alert("ë¶„ì„í•  í…ìŠ¤íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•˜ê±°ë‚˜ íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”!"); 
        return; 
    }

    const btn = document.getElementById('analyzeBtn');
    const loadingDiv = document.getElementById('aiLoading');
    const resultDiv = document.getElementById('aiResultContainer');

    btn.disabled = true;
    loadingDiv.style.display = 'block';
    resultDiv.style.display = 'none';
    
    try {
        const formData = new FormData();
        formData.append('text', text); 
        
        if (selectedFile) {
            formData.append('file', selectedFile); 
        }

        const response = await fetch('/analyze', {
            method: 'POST',
            body: formData 
        });
        
        const data = await response.json();

        if (data.error) throw new Error(data.error);

        document.getElementById('resultSummary').innerText = data.summary || "ìš”ì•½ ì •ë³´ ì—†ìŒ";
        
        const labelsDiv = document.getElementById('resultLabels');
        labelsDiv.innerHTML = "";
        
        // [ìˆ˜ì • 1] "ì¼ìƒ ëŒ€í™”"ë‚˜ "ì •ìƒ"ì´ë©´ ì´ˆë¡ìƒ‰(tag-safe), ì•„ë‹ˆë©´ ë¹¨ê°„ìƒ‰(tag-danger)
        let typeClass = "tag-danger"; // ê¸°ë³¸ì€ ë¹¨ê°•
        let typeIcon = "ğŸš¨";
        
        // ë°±ì—”ë“œì—ì„œ "ì¼ìƒ ëŒ€í™”" ë˜ëŠ” "ì •ìƒ"ì´ë¼ê³  ì˜¤ë©´ ì´ˆë¡ìƒ‰ìœ¼ë¡œ ë³€ê²½
        if (data.scam_type && (data.scam_type.includes("ì¼ìƒ") || data.scam_type.includes("ì •ìƒ"))) {
            typeClass = "tag-safe";
            typeIcon = "âœ…";
        }

        if (data.scam_type) {
            labelsDiv.innerHTML += `<span class="status-tag ${typeClass}">${typeIcon} ${data.scam_type}</span>`;
        }

        // [ìˆ˜ì • 2] ìœ„í—˜ë„ ì ìˆ˜ì— ë”°ë¼ ìƒ‰ìƒ ë³€ê²½ ë¡œì§ ì¶”ê°€
        if (data.current_stage && data.current_stage !== "í•´ë‹¹ ì—†ìŒ") {
            labelsDiv.innerHTML += `<span class="status-tag tag-step">STEP: ${data.current_stage}</span>`;
        }
        
        const risk = Math.floor((data.scores?.risk_score || 0)); // 100ì„ ê³±í•˜ì§€ ì•Šê³  ì›ë³¸ ì ìˆ˜ê°€ 0~100ì´ë¼ë©´ ê·¸ëŒ€ë¡œ ì”ë‹ˆë‹¤. (ë°±ì—”ë“œ ë¡œì§ì— ë”°ë¼ ë‹¤ë¦„)
        // ë§Œì•½ ë°±ì—”ë“œê°€ 0.0 ~ 1.0ì„ ì¤€ë‹¤ë©´ ì•„ë˜ ì¤„ ì‚¬ìš©:
        // const risk = Math.floor((data.scores?.risk_score || 0) * 100);

        // ìœ„í—˜ë„ê°€ 30ì  ë¯¸ë§Œì´ë©´ ì´ˆë¡ìƒ‰(safe), ê·¸ ì´ìƒì´ë©´ ë¹¨ê°„ìƒ‰(danger)
        let riskClass = (risk < 30) ? "tag-safe" : "tag-danger";
        
        labelsDiv.innerHTML += `<span class="status-tag ${riskClass}">ìœ„í—˜ë„: ${risk}%</span>`;

        const structureDiv = document.getElementById('resultStructure');
        let tacticsHtml = data.analysis?.detected_tactics?.map(t => `â€¢ ${t}`).join("<br>") || "-";
        let evidenceHtml = data.analysis?.evidence_sentences?.map(e => `"${e}"`).join(", ") || "-";
        
        let fileInfoHtml = "";
        if (selectedFile) {
            fileInfoHtml = `<div style="margin-top:10px; padding:8px; background:#f0fdfa; color:#0f766e; border-radius:6px; font-size:0.9em;">ğŸ“¸ <strong>íŒŒì¼ ë¶„ì„ í¬í•¨ë¨:</strong> ${selectedFile.name}</div><br>`;
        }
        
        structureDiv.innerHTML = `
    <strong>ğŸ“‚ ê³¼ê±° ìœ ì‚¬ ì‚¬ë¡€ ë¶„ì„:</strong><br>
    <div style="color: #0f766e; background: #f0fdfa; padding: 10px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #ccfbf1;">
        ${data.matched_case || "ìœ ì‚¬í•œ ê³¼ê±° ì‚¬ë¡€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}
    </div>
    ${fileInfoHtml}
    <strong>ğŸ•µï¸ ê°ì§€ëœ ì „ìˆ :</strong><br>${tacticsHtml}<br><br>
    <strong>ğŸ” ì¦ê±° ë¬¸ì¥:</strong><br>${evidenceHtml}
`;

        document.getElementById('resultWarning').innerHTML = `${data.warning_message}<br><span style="font-size:0.9em; opacity:0.8;">ğŸ”® ë‹¤ìŒ í–‰ë™: ${data.next_step_prediction}</span>`;

    } catch (err) {
        alert("ì˜¤ë¥˜: " + err.message);
    } finally {
        btn.disabled = false;
        loadingDiv.style.display = 'none';
        resultDiv.style.display = 'block';
    }
  }
  let chatHistory = [];
  async function sendChat() {
    const input = document.getElementById('chatInput');
    const msg = input.value;
    if(!msg) return;

    const container = document.getElementById('chatContainer');
    container.innerHTML += `<div class="chat-bubble user">${msg}</div>`;
    container.scrollTop = container.scrollHeight;
    
    input.value = "";
    
    if(typeof chatHistory === 'undefined') chatHistory = []; 
    chatHistory.push({text: msg, isUser: true});

    const scenario = document.getElementById('simScenario').value;
    const btn = document.getElementById('btnSend');
    btn.disabled = true;

    try {
      const res = await fetch('/simulate', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          scenario: scenario,
          message: msg,
          history: chatHistory
        })
      });
      const data = await res.json();
      
      container.innerHTML += `<div class="chat-bubble ai">${data.reply}</div>`;
      chatHistory.push({text: data.reply, isUser: false});
      container.scrollTop = container.scrollHeight;
      
    } catch(e) {
      container.innerHTML += `<div class="chat-bubble ai">ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>`;
    } finally {
      btn.disabled = false;
      document.getElementById('chatInput').focus();
    }
  }

  document.querySelectorAll('[data-nav]').forEach(el => {
    el.addEventListener('click', (e) => { e.preventDefault(); const target = el.dataset.nav; if (views.includes(target)) showView(target); });
  });
  function toggleAuthForm(type) {
      document.getElementById('loginForm').style.display = (type === 'login') ? 'block' : 'none';
      document.getElementById('signupForm').style.display = (type === 'signup') ? 'block' : 'none';
  }

  // 2. ë¡œê·¸ì¸ ìˆ˜í–‰ (admin / 1234)
  function performLogin() {
      const id = document.getElementById('loginId').value;
      const pw = document.getElementById('loginPw').value;

      // ì•„ì´ë””/ë¹„ë²ˆ í™•ì¸ ë¡œì§
      if(id === 'admin' && pw === '1234') {
          alert("ê´€ë¦¬ìë‹˜, í™˜ì˜í•©ë‹ˆë‹¤! (ë¡œê·¸ì¸ ì„±ê³µ)");
          isLoggedIn = true;
          updateNavAfterLogin(); // ìƒë‹¨ ë©”ë‰´ ë³€ê²½
          showView('home'); // ë©”ì¸ìœ¼ë¡œ ì´ë™
      } else {
          alert("ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n(Hint: admin / 1234)");
      }
  }

  // 3. íšŒì›ê°€ì… ìˆ˜í–‰ (ê°€ì§œ ë¡œì§)
  function performSignup() {
      alert("ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! (ì‹œì—°ìš©)");
      toggleAuthForm('login');
  }

  // 4. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ìƒë‹¨ ë©”ë‰´ ë³€ê²½ (ë¡œê·¸ì¸ -> ë¡œê·¸ì•„ì›ƒ)
  function updateNavAfterLogin() {
      const navArea = document.getElementById('navAuthArea');
      if(isLoggedIn) {
          navArea.innerHTML = `<button class="auth-link" onclick="performLogout()">ë¡œê·¸ì•„ì›ƒ</button>`;
      } else {
          // ì›ë˜ëŒ€ë¡œ ë³µêµ¬
          navArea.innerHTML = `
              <button class="auth-link" onclick="showAuth('login')">ë¡œê·¸ì¸</button>
              <span class="nav-divider">|</span>
              <button class="auth-link" onclick="showAuth('signup')">íšŒì›ê°€ì…</button>
          `;
      }
  }

  // 5. ë¡œê·¸ì•„ì›ƒ ìˆ˜í–‰
  function performLogout() {
      isLoggedIn = false;
      alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
      updateNavAfterLogin();
      showView('home');
  }
</script>
</body>
</html>
